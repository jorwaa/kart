(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[598],{520:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkin",function(){return e(3796)}])},9702:function(t,n,e){"use strict";async function i(){let t=await fetch("http://192.168.10.121:9090/checkin");if(!t.ok)throw Error("Failed to fetch data");let n=await t.json();if(!n)throw Error("Failed to parse data");return n}e.d(n,{Z:function(){return i}})},3796:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return d}});var i=e(5893),c=e(9702);async function o(t){let n=await fetch("http://192.168.10.121:9090/checkin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await n.json()}var a=e(7294);e(7212);var r=e(2729),l=e(9521);function s(){let t=(0,r._)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100vh;\n  width: 100vw;\n"]);return s=function(){return t},t}let u=t=>{let{children:n}=t;return(0,i.jsx)(h,{children:n})},h=l.ZP.div(s());function d(){let[t,n]=(0,a.useState)(!0),[e,r]=(0,a.useState)(""),[l,s]=(0,a.useState)(null),[h,d]=(0,a.useState)(!1),[f,w]=(0,a.useState)();(0,a.useEffect)(()=>{p()},[]);let p=()=>{console.log("tryGetGeolocation"),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(t=>{let{coords:n}=t;s({lat:n.latitude,lon:n.longitude})})};async function g(){await (0,c.Z)().then(e=>{console.log(e[0]);let i=new Date(e[0].timestamp).getTime();if(new Date(i+9e5)>new Date)n(!1),r("You can only checked in once during the past 15 minutes");else if(null!==l&&t)try{o(l).then(t=>{w("data.lat: ".concat(t.lat," lon: ").concat(t.lon," timestamp: ").concat(t.timestamp)),d(!0),n(!1)})}catch(t){console.error(t)}})}return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(u,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{children:"Check-In"}),t&&(0,i.jsx)("button",{onClick:()=>g(),children:"Check-In"}),!0!==t&&(0,i.jsx)("p",{children:e})]}),(0,i.jsx)("div",{children:f&&(0,i.jsx)("p",{children:f})})]})})}}},function(t){t.O(0,[774,570,888,179],function(){return t(t.s=520)}),_N_E=t.O()}]);